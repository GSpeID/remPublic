<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
>
<head>
    <div th:replace="/custom/pagesTemplate :: css-head"></div>

    <div th:replace="/custom/pagesTemplate :: js-head"></div>
    <script th:src="@{/js/service.js}" src="../static/js/service.js"></script>
    <!--    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcy_DKc4YeeDJtNBu1h8z2rtJxTxU1Vnw&libraries=places"></script>-->
    <!--    <script th:src="@{/js/address.js}" src="../static/js/address.js"></script>-->

    <title>Заказы</title>

</head>
<body>
<div th:replace="~{/custom/pagesTemplate :: nav-bar(Заказы)}"></div>
<br>
<br>
<div class="container-fluid">
    <table id="r-services" class="table table-hover">
        <thead>
        <tr class="bg-light">
            <th scope="col">Клиент</th>
            <th scope="col">Вид ремонта</th>
            <th scope="col">Адрес работ</th>
            <th scope="col">Описание</th>
            <th scope="col">Техника</th>
            <th scope="col">Стоимость</th>
            <th scope="col">Дата</th>
            <th scope="col">ID</th>
            <th scope="col">Действия</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${#lists.isEmpty(repairs)}">
            <td class="text-center" colspan="5">Нет информации</td>
        </tr>
        <tr th:each="repair : ${repairs}">
            <th scope="row"
                th:text="${repair.getClient().getClientName()}"></th>
            <td th:text="${repair.repairType.getRepairTypeName()}"></td>
            <td th:text="${repair.getRepairAddress()}"></td>
            <td th:text="${repair.getRepairDescription()}"></td>
            <td th:text="${repair.getDevice().getDeviceName()}"></td>
            <td th:text="${repair.getFullCost()}"></td>
            <td th:text="${repair.getRepairDate()}"></td>
            <td th:text="${repair.getRepairId()}"></td>
            <td>

                <div class="btn-group" role="group">
                    <a th:href="@{findRepair/(*{repair.repairId})}" class="btn btn-outline-info fullInfoBtn"
                       data-toggle="tooltip" data-placement="top" title="Полная информация"
                       data-bs-toggle="modal" data-bs-target="#fullInfoModal"><i class="fa-regular fa-folder-open"></i></a>
                    <a th:href="@{findRepair/(*{repair.repairId})}" class="btn btn-outline-secondary editRepairBtn"
                       data-toggle="tooltip" data-placement="top" title="Редактировать"
                       data-bs-toggle="modal" data-bs-target="#editRepairModal"><i class="fa-regular fa-pen-to-square"></i></a>
                    <a class="btn btn-outline-secondary saveRepairEventBtn" type="button" id="saveRepairEventBtn"
                       data-toggle="tooltip" data-placement="top" title="Сохранить в календарь">
                        <i class="fa-regular fa-calendar-plus"></i></a>
                    <a class="btn btn-outline-danger"
                       data-toggle="tooltip" data-placement="top" title="Удалить"
                       th:href="@{/repair-service/delete/{id}(id=${repair.repairId})}"><i
                            class="fa-solid fa-folder-minus"></i></a>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
    <br>
    <br>
    <!-- Button trigger modal  Add New Repair -->
    <div class="text-center">
        <button type="button" class="btn btn-outline-primary repairAddModalBtn"
                data-bs-toggle="modal" data-bs-target="#addRepairModal">
            Создать новый заказ
        </button>
    </div>
    <!-- Modal Add New Client -->
<div th:replace="~{/custom/modals :: repairAddFragment}"></div>
    <!-- Modal Edit Repair -->
<div th:replace="~{/custom/modals :: repairEditFragment}"></div>
    <!-- Modal Full Info -->
<div th:replace="~{/custom/modals :: fullInfoFragment}"></div>
</body>
</html>