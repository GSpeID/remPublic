<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="/custom/pagesTemplate :: css-head"></div>
    <div th:replace="/custom/pagesTemplate :: js-head"></div>
    <script th:src="@{../js/management.js}" src="../static/js/management.js"></script>
    <script th:src="@{../js/dataTable.js}" src="../static/js/dataTable.js"></script>

    <title>Управление</title>
</head>
<body>
<div th:replace="~{/custom/pagesTemplate :: nav-bar(Управление)}"></div>
<div class="accordion" id="accordionExample">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <strong>Клиенты</strong> &nbsp; Всего клиентов : &nbsp;
                <div th:text="${clients.size()}"></div>
            </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show"
             aria-labelledby="headingOne"
             data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <div class="col-12">
                    <div>
                        <form th:action="@{/repair-service/management/create-client}" th:object="${clientDTO}"
                              method="post">
                            <div class="row">
                                <div class="col">
                                    <select class="form-select" th:object="${clientTypes}" id="dropClientType"
                                    >
                                        <option value="0">Выберите тип клиента</option>
                                        <option th:each="clientType : ${clientTypes}"
                                                th:value="${clientType.clientTypeId}"
                                                th:text="${clientType.clientTypeName}"
                                                th:required="required"></option>
                                    </select>
                                    <div th:if="${#fields.hasErrors('clientTypeId')}" th:errors="*{clientTypeId}"
                                         class="error"/>
                                    <input type="hidden" class="form-control"
                                           id="clientType" name="clientTypeId" value=""/>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <input type="text" class="form-control"
                                               placeholder="Контактное лицо"
                                               id="clientContact" name="clientContact" value=""/>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <input type="text" class="form-control"
                                               pattern="+7[0-9]{10}"
                                               placeholder="Телефон +71234567890"
                                               id="clientPhone" name="clientPhone" value=""/>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <input type="email" class="form-control"
                                               placeholder="E-mail"
                                               id="clientMail" name="clientMail" value=""/>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" placeholder="Клиент"
                                               id="clientName" name="clientName" value=""
                                               aria-label="client name" aria-describedby="button-addon1"
                                               th:field="*{clientName}"
                                        />
                                        <button class="btn btn-outline-secondary" type="submit"
                                                id="button-addon1">Добавить клиента
                                        </button>
                                    </div>
                                    <div th:if="${#fields.hasErrors('clientName')}" th:errors="*{clientName}"
                                         class="error"/>
                                </div>
                            </div>
                        </form>
                    </div>
                    <br>
                    <table id="clients" class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">Клиент ID</th>
                            <th scope="col">Имя\Название клиента</th>
                            <th scope="col">Тип клиента</th>
                            <th scope="col">Действия</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:if="${#lists.isEmpty(clients)}">
                            <td class="text-center" colspan="5">Нет информации</td>
                        </tr>
                        <tr th:each="client : ${clients}">
                            <th scope="row" th:text="*{client.getClientId()}"></th>
                            <td th:text="${client.getClientName()}"></td>
                            <td th:text="${client.getClientType().getClientTypeName()}"></td>
                            <td>
                                <div class="btn-group" role="group">
                                    <a th:href="@{findClient/(*{client.clientId})}"
                                       class="btn btn-outline-info fullInfoClientBtn"
                                       data-toggle="tooltip" data-placement="top" title="Полная информация"
                                       data-bs-toggle="modal" data-bs-target="#clientCardModal"><i
                                            class="fa-regular fa-folder-open"></i></a>
                                    <a th:href="@{findClient/(*{client.clientId})}" data-toggle="tooltip"
                                       data-placement="top" title="Редактировать"
                                       class="btn btn-outline-secondary editClientBtn"
                                       data-bs-toggle="modal" data-bs-target="#editClientModal"><i
                                            class="fa-regular fa-pen-to-square"></i></a>
                                    <a class="btn btn-outline-danger" data-toggle="tooltip" data-placement="top"
                                       title="Удалить"
                                       th:href="@{/repair-service/management/delete-client/{id}(id=${client.clientId})}">
                                        <i class="fa-solid fa-folder-minus"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <br>
                </div>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                <strong>Техника</strong> &nbsp; Всего моделей техники : &nbsp;
                <div th:text="${devices.size()}"></div>
            </button>
        </h2>
        <div id="collapseTwo" class="accordion-collapse show"
             aria-labelledby="headingTwo"
             data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <div>
                    <form class="row" th:action="@{/repair-service/management/create-device/}" th:object="${deviceDTO}" method="post">
                        <div class="input-group mb-3"  >
                            <input type="text" class="form-control" placeholder="Введите название или модель техники"
                                   id="deviceName" name="deviceName" value="" required="required"
                                   aria-label="device name" aria-describedby="button-addon2"
                                   th:field="*{deviceName}"
                            />
                            <button class="btn btn-outline-secondary"
                                    type="submit" id="button-addon2">Добавить модель техники</button>
                        </div>
                        <div th:if="${#fields.hasErrors('deviceName')}" th:errors="*{deviceName}" class="error"/>
                    </form>
                </div>
                <br>
                <div class="col-12">
                    <table id="devices" class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">Техника ID</th>
                            <th scope="col">Модель техники</th>
                            <th scope="col">Действия</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:if="${#lists.isEmpty(devices)}">
                            <td class="text-center" colspan="5">Нет информации</td>
                        </tr>
                        <tr th:each="device : ${devices}">
                            <th scope="row" th:text="*{device.getDeviceId()}"></th>
                            <td th:text="${device.getDeviceName()}"></td>
                            <td>
                                <div class="btn-group" role="group">
                                    <a th:href="@{findDevice/(*{device.getDeviceId()})}"
                                       class="btn btn-outline-warning editDeviceBtn"
                                       data-bs-toggle="modal" data-bs-target="#editDeviceModal">Редкатировать</a>
                                    <a class="btn btn-outline-danger"
                                       th:href="@{/repair-service/management/delete-device/{id}(id=${device.deviceId})}"
                                    >Удалить</a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <br>
                </div>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                <strong>Типы клиентов</strong> &nbsp; Всего типов клиентов : &nbsp;
                <div th:text="${clientTypes.size()}"></div>
            </button>
        </h2>
        <div id="collapseThree" class="accordion-collapse show"
             aria-labelledby="headingThree"
             data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <div class="col-12">
                    <div>
                        <form class="row" th:action="@{/repair-service/management/create-client-type/}"
                              th:object="${clientTypeDTO}" method="post">
                            <div class="input-group mb-3"  >
                                <input type="text" class="form-control" placeholder="Введите тип клиента"
                                       id="clientTypeName" name="clientTypeName" value="" required="required"
                                       aria-label="client type name" aria-describedby="button-addon3"
                                       th:field="*{clientTypeName}"
                                />
                                <button class="btn btn-outline-secondary"
                                        type="submit" id="button-addon3">Добавить тип клиента</button>
                            </div>
                            <div th:if="${#fields.hasErrors('clientTypeName')}" th:errors="*{clientTypeName}" class="error"/>
                        </form>
                    </div>
                    <br>
                    <table id="clientsTypes" class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">Тип клиента ID</th>
                            <th scope="col">Тип клиента</th>
                            <th scope="col">Действия</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:if="${#lists.isEmpty(clientTypes)}">
                            <td class="text-center" colspan="5">Нет информации</td>
                        </tr>
                        <tr th:each="clientType : ${clientTypes}">
                            <th scope="row" th:text="*{clientType.getClientTypeId()}"></th>
                            <td th:text="${clientType.getClientTypeName()}"></td>
                            <td>
                                <div class="btn-group" role="group">
                                    <a th:href="@{findClientType/(*{clientType.clientTypeId})}"
                                       class="btn btn-outline-warning editClientTypeBtn"
                                       data-bs-toggle="modal"
                                       data-bs-target="#editClientTypeModal">Редактировать</a>
                                    <a class="btn btn-outline-danger"
                                       th:href="@{/repair-service/management/delete-client-type/{id}(id=${clientType.clientTypeId})}">Удалить</a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <br>
                </div>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingFour">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                <strong>Виды ремонтов</strong> &nbsp; Всего типов ремонтов :&nbsp;
                <div th:text="${repairTypes.size()}"></div>
            </button>
        </h2>
        <div id="collapseFour" class="accordion-collapse show"
             aria-labelledby="headingFour"
             data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <div>
                    <form class="row" th:action="@{/repair-service/management/create-repair-type/}"
                          th:object="${repairTypeDTO}" method="post">
                        <div class="input-group mb-3"  >
                            <input type="text" class="form-control" placeholder="Введите тип ремонта"
                                   id="repairTypeName" name="repairTypeName" value="" required="required"
                                   aria-label="repair type name" aria-describedby="button-addon4"
                                   th:field="*{repairTypeName}"
                            />
                            <button class="btn btn-outline-secondary"
                                    type="submit" id="button-addon4">Добавить тип ремонта</button>
                        </div>
                        <div th:if="${#fields.hasErrors('repairTypeName')}" th:errors="*{repairTypeName}" class="error"/>
                    </form>
                </div>
                <br>
                <div class="col-12">
                    <table id="repairsTypes" class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">Вид ремонта ID</th>
                            <th scope="col">Вид ремонта</th>
                            <th scope="col">Действия</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:if="${#lists.isEmpty(repairTypes)}">
                            <td class="text-center" colspan="5">нет информации</td>
                        </tr>
                        <tr th:each="repairType : ${repairTypes}">
                            <th scope="row" th:text="*{repairType.getRepairTypeId()}"></th>
                            <td th:text="${repairType.getRepairTypeName()}"></td>
                            <td>
                                <div class="btn-group" role="group">
                                    <a th:href="@{findRepairType/(*{repairType.getRepairTypeId()})}"
                                       class="btn btn-outline-warning editRepairTypeBtn"
                                       data-bs-toggle="modal"
                                       data-bs-target="#editRepairTypeModal">Редактировать</a>
                                    <a class="btn btn-outline-danger"
                                       th:href="@{/repair-service/management/delete-repair-type/{id}(id=${repairType.repairTypeId})}">Удалить</a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <br>
                </div>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <h2 class="accordion-header" id="headingFive">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                <strong>Статусы заказа</strong> &nbsp; Всего статусов :&nbsp;
                <div th:text="${repairStatuses.size()}"></div>
            </button>
        </h2>
        <div id="collapseFive" class="accordion-collapse show"
             aria-labelledby="headingFive"
             data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <div class="col-12">
                    <div>
                        <form class="row" th:action="@{/repair-service/management/create-status/}"
                              th:object="${repairStatusDTO}" method="post">
                            <div class="input-group mb-3"  >
                                <input type="text" class="form-control" placeholder="Введите статус заказа"
                                       id="statusName" name="statusName" value="" required="required"
                                       aria-label="status name" aria-describedby="button-addon5"
                                       th:field="*{statusName}"
                                />
                                <button class="btn btn-outline-secondary"
                                        type="submit" id="button-addon5">Добавить статус заказа</button>
                            </div>
                            <div th:if="${#fields.hasErrors('statusName')}" th:errors="*{statusName}" class="error"/>
                        </form>
                    </div>
                    <br>
                    <table id="statuses" class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">Статус ID</th>
                            <th scope="col">Статус</th>
                            <th scope="col">Действия</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:if="${#lists.isEmpty(repairStatuses)}">
                            <td class="text-center" colspan="5">Нет информации</td>
                        </tr>
                        <tr th:each="status : ${repairStatuses}">
                            <th scope="row" th:text="*{status.getStatusId()}"></th>
                            <td th:text="${status.getStatusName()}"></td>
                            <td>
                                <div class="btn-group" role="group">
                                    <a th:href="@{findStatus/(*{status.getStatusId()})}"
                                       class="btn btn-outline-warning editStatusBtn"
                                       data-bs-toggle="modal" data-bs-target="#editStatusModal">Редактировать</a>
                                    <a class="btn btn-outline-danger"
                                       th:href="@{/repair-service/management/delete-status/{id}(id=${status.getStatusId()})}">Удалить</a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <br>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:replace="/custom/modals :: clientCard"></div>
</body>
</html>